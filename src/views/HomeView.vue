<script lang="ts" setup>
import { ref } from "vue";
import FormGenerator from "../components/FormGenerator.vue";

const fields = [
  {
    name: "username",
    label: "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
    type: "input",
    attrs: { placeholder: "–í–≤–µ–¥–∏—Ç–µ –∏–º—è" },
  },
  {
    name: "email",
    label: "Email",
    type: "input",
    attrs: { type: "email", placeholder: "–í–≤–µ–¥–∏—Ç–µ email" },
  },
  {
    name: "role",
    label: "–†–æ–ª—å",
    type: "select",
    options: [
      { label: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å", value: "user" },
      { label: "–ê–¥–º–∏–Ω", value: "admin" },
    ],
    attrs: {},
  },
  {
    name: "subscribe",
    label: "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–æ–≤–æ—Å—Ç–∏",
    type: "checkbox",
    attrs: {},
  },
  {
    name: "about",
    label: "–û —Å–µ–±–µ",
    type: "textarea",
    attrs: { rows: 3, placeholder: "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ" },
  },
];

const formData = ref({
  username: "",
  email: "",
  role: "",
  subscribe: false,
  about: "",
});

function onSubmit(data: Record<string, unknown>) {
  alert("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!\n" + JSON.stringify(data, null, 2));
}

function onReset() {
  alert("–§–æ—Ä–º–∞ —Å–±—Ä–æ—à–µ–Ω–∞");
}
</script>

<template>
  <div>
    <h1>–î–µ–º–æ: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ñ–æ—Ä–º</h1>
    <FormGenerator v-model="formData" :fields="fields" @submit="onSubmit" @reset="onReset">
      <template #field-username="{ field }">
        <div class="form-group">
          <label :for="field.name">üë§ {{ field.label }}</label>
          <input
            v-bind="field.attrs"
            v-model="formData.username"
            :id="field.name"
            class="form-control"
          />
        </div>
      </template>
    </FormGenerator>
    <pre>{{ formData }}</pre>
  </div>
</template>

<style scoped>
h1 {
  margin-bottom: 1rem;
}
pre {
  background: #f8f8f8;
  padding: 1rem;
  border-radius: 4px;
  margin-top: 2rem;
}
</style>
